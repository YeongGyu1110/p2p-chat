<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.png" />
    <meta property="og:title" content="Prism Chat">
    <meta property="og:description" content="기록이 남지 않은 프라이빗 채팅을 시도해보세요.">
    <meta property="og:url" content="https://prism-chat.netlify.app/">
    <meta property="og:type" content="website">
    <title>Prism Chat</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="app-container" class="container">
        <div id="signaling-container">
            <h2>🔐 보안 P2P 연결 설정</h2>

            <div class="step-grid">
                <div class="step">
                    <h3>User A: 방 만들기</h3>
                    <p>채팅방을 개설합니다. 아래 버튼을 눌러 생성된 코드를 친구에게 보내주세요.</p>
                    <button id="create-offer-btn">1. 연결 코드 생성</button>
                    <textarea id="offer-sdp" placeholder="[생성된 코드 대기중...]" readonly
                        style="margin-top: 10px;"></textarea>
                </div>

                <div class="step">
                    <h3>User B: 참여하기</h3>
                    <p>친구가 보낸 코드를 아래에 넣고 '응답 코드'를 생성하여 친구에게 다시 보내주세요.</p>
                    <textarea id="received-sdp-answer" placeholder="친구의 연결 코드를 여기에 붙여넣으세요"></textarea>
                    <button id="create-answer-btn">2. 응답 코드 생성</button>
                    <textarea id="answer-sdp" placeholder="[응답 코드 대기중...]" readonly
                        style="margin-top: 10px;"></textarea>
                </div>

                <div class="step step-full">
                    <h3>User A: 연결 확정</h3>
                    <p>친구가 보낸 '응답 코드'를 여기에 입력하여 연결을 마무리하세요.</p>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <textarea id="received-sdp-final" placeholder="친구의 응답 코드를 여기에 붙여넣으세요"
                            style="flex: 1; min-width: 250px;"></textarea>
                        <button id="connect-btn" style="flex: 0 0 120px; margin-top: 0; height: auto;">3. 연결 시작
                            🚀</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="chat-container" class="hidden">
            <div id="chat-header">
                <h2>💬 Secret Chat</h2>
                <div id="status">연결 대기중...</div>
            </div>
            <div id="messages">
                <div class="message system">P2P 연결은 암호화되어 전송됩니다.</div>
            </div>
            <form id="message-form">
                <input type="text" id="message-input" placeholder="메시지를 입력하세요..." autocomplete="off" disabled>
                <button type="submit" id="send-btn" disabled>전송</button>
            </form>
        </div>

    </div>

    <script src="script.js"></script>
</body>

</html>